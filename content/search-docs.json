---
---

{% assign pages = site.resources | concat: site.pages %}

{ "pages": [{% for page in pages %} {% if page.title  and page.nosearch != true %}
    { 
        "id": {{ forloop.index }},
        "title": "{{ page.title | strip_html | strip_newlines | strip  }}",
        "categories": "{{page.categories | join: " "}}",
        "tags": "{{page.tags | join: " "}}",
        {% assign links = page.tags | concat:page.categories %}
        "links": "{% include html/search_links links=links %}",
        "excerpt": "{{ page.excerpt | strip_html | strip_newlines | strip }}",
        "url": "{{site.baseurl}}{{page.url}}"
    } {% else %} {
        "id": "NaN",
        "title": "",
        "categories": "",
        "tags": "",
        "excerpt": "",
        "url": ""
    }{% endif %}{% unless forloop.last %},{% endunless %}
  {% endfor %}],
  "posts": [{% for post in site.posts %}
    { "id": {{ forloop.index | plus: site.pages.size }},
        "title": "{{ post.title | strip_html | strip_newlines | strip  }}",
        {% assign links = post.tags | concat:post.categories %}
        "links": "{% include html/search_links links=links %}",
        "excerpt": "{{post.excerpt | strip_html | strip_newlines | strip }}",
        "url": "{{site.baseurl}}{{post.url}}" }{% unless forloop.last %},{% endunless %}{% endfor %}]}